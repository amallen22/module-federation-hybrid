<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="ie=edge" http-equiv="x-ua-compatible">
    <meta name="robots" content="noindex, nofollow">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>CV Login</title>
    
    <style type="text/css">
        @media only screen and (min-width: 993px) {
          #app {
            background-color:#f0f3f5;
            background-size: cover;
          }
        }
    </style>

    <!-- Polyfills for global, crypto, process, and require (required for amazon-cognito-identity-js) -->
    <script type="module">
        // Importar Buffer y hacerlo disponible globalmente
        import { Buffer } from 'buffer';
        window.Buffer = Buffer;
        if (typeof global !== 'undefined') {
            global.Buffer = Buffer;
        }
        if (typeof globalThis !== 'undefined') {
            globalThis.Buffer = Buffer;
        }
    </script>
    <script>
        // Polyfill for global
        if (typeof global === 'undefined') {
            var global = globalThis;
        }

        // Polyfill for process
        if (typeof process === 'undefined') {
            window.process = {
                env: {},
                platform: 'browser',
                version: 'v20.10.0',
                browser: true
            };
            if (typeof global !== 'undefined') {
                global.process = window.process;
            }
            if (typeof globalThis !== 'undefined') {
                globalThis.process = window.process;
            }
        }

        // Polyfill for exports and module (para módulos CommonJS)
        if (typeof exports === 'undefined') {
            window.exports = {};
            if (typeof global !== 'undefined') {
                global.exports = window.exports;
            }
            if (typeof globalThis !== 'undefined') {
                globalThis.exports = window.exports;
            }
        }
        if (typeof module === 'undefined') {
            window.module = { exports: window.exports || {} };
            if (typeof global !== 'undefined') {
                global.module = window.module;
            }
            if (typeof globalThis !== 'undefined') {
                globalThis.module = window.module;
            }
        }

        // Polyfill for require (básico, para módulos legacy)
        if (typeof require === 'undefined') {
            window.require = function(module) {
                // Intentar resolver módulos comunes
                if (module === 'buffer' || module === 'buffer/') {
                    try {
                        // Buffer debería estar disponible a través de Vite
                        var BufferClass = window.Buffer || globalThis.Buffer;
                        if (BufferClass) {
                            return { Buffer: BufferClass, default: { Buffer: BufferClass } };
                        }
                    } catch (e) {
                        console.warn('No se pudo cargar buffer:', e);
                    }
                }
                // Para módulos relativos (./sha, ./sha256, etc.), retornar objeto vacío
                // Estos módulos deberían ser manejados por Vite en tiempo de compilación
                if (module.startsWith('./') || module.startsWith('../')) {
                    console.warn('require() llamado para módulo relativo:', module, '- Debería ser transformado por Vite.');
                    return {};
                }
                // Para otros módulos, solo loguear y retornar un objeto vacío
                console.warn('require() llamado para:', module, '- Esto puede no funcionar correctamente en ESM.');
                return {};
            };
            if (typeof global !== 'undefined') {
                global.require = window.require;
            }
            if (typeof globalThis !== 'undefined') {
                globalThis.require = window.require;
            }
        }

        // Polyfill for crypto (required for amazon-cognito-identity-js)
        // NO intentar sobrescribir window.crypto (es de solo lectura)
        // Solo asegurar que global.crypto y globalThis.crypto estén disponibles
        if (typeof window !== 'undefined') {
            const cryptoPolyfill = window.crypto || {
                getRandomValues: function(arr) {
                    for (let i = 0; i < arr.length; i++) {
                        arr[i] = Math.floor(Math.random() * 256);
                    }
                    return arr;
                }
            };
            // Solo establecer en global y globalThis, NO en window
            if (typeof global !== 'undefined') {
                try {
                    if (!global.crypto) {
                        global.crypto = cryptoPolyfill;
                    }
                } catch (e) {
                    // Ignorar si no se puede asignar
                }
            }
            if (typeof globalThis !== 'undefined') {
                try {
                    if (!globalThis.crypto) {
                        globalThis.crypto = cryptoPolyfill;
                    }
                } catch (e) {
                    // Ignorar si no se puede asignar
                }
            }
        }
    </script>

    <!--
        Setup Didomi with S3
    -->
    <script type="text/javascript">
        if (typeof window !== 'undefined') {
            var host = window.location.host;
            var domainName = host.slice(host.indexOf(".") + 1, host.length);
            var folderName = domainName.replaceAll(".", "").replaceAll("-", "");
            var script = document.createElement("script");
            script.src = "https://static." + domainName + "/scripts/" + folderName + "/didomi.js";
            script.type = "text/javascript";
            document.head.appendChild(script);
        }
    </script>

    <!-- Start Visual Website Optimizer Asynchronous Code -->
    <script type='text/javascript'>
        var _vwo_code=(function(){
            var account_id=90123,
                    settings_tolerance=2000,
                    library_tolerance=2500,
                    use_existing_jquery=false,
            /* DO NOT EDIT BELOW THIS LINE */
                    f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
    </script>
    <!-- End Visual Website Optimizer Asynchronous Code -->
    
    <!-- Hotjar Tracking Code -->
    <script>
        (function (h, o, t, j, a, r) {
            h.hj = h.hj || function () { (h.hj.q = h.hj.q || []).push(arguments) };
            h._hjSettings = { hjid: 6471565, hjsv: 6 };
            a = o.getElementsByTagName('head')[0];
            r = o.createElement('script'); r.async = 1;
            r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
            a.appendChild(r);
        })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');
    </script>
</head>
<body>
    <div id="app"></div>
    <script type="module" src="/src/main.tsx"></script>
</body>
</html>

