rules:
  - id: test-and-build-all
    description: >
      Ejecuta tests unitarios con Vitest, tests E2E con Playwright y build de todas las apps.
      Ãštil antes de hacer commits importantes o deploys.
    triggers:
      - "test and build all"
      - "run all tests and build"
      - "full test suite"
      - "test everything"
    steps:
      - name: Install dependencies
        run: |
          echo "ğŸ“¦ Verificando dependencias..."
          pnpm install

      - name: Run unit tests (Vitest)
        run: |
          echo "ğŸ§ª Ejecutando tests unitarios con Vitest..."
          pnpm vitest run --workspace

      - name: Build all apps
        run: |
          echo "ğŸ—ï¸  Building todas las apps..."
          pnpm run build:all

      - name: Run E2E tests (Playwright)
        run: |
          echo "ğŸ­ Ejecutando tests E2E con Playwright..."
          pnpm test:e2e

      - name: Summary
        run: |
          echo ""
          echo "âœ… ==============================================="
          echo "âœ… TODOS LOS TESTS Y BUILDS COMPLETADOS"
          echo "âœ… ==============================================="
          echo "âœ… Tests unitarios (Vitest): PASSED"
          echo "âœ… Builds (todas las apps): SUCCESS"
          echo "âœ… Tests E2E (Playwright): PASSED"
          echo "âœ… ==============================================="
          echo ""


