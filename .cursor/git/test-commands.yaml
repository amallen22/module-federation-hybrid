rules:
  - id: test-unit-only
    description: >
      Ejecuta solo los tests unitarios de todas las apps con Vitest.
    triggers:
      - "run unit tests"
      - "test unit"
      - "vitest run"
    steps:
      - name: Run unit tests
        run: |
          echo "ğŸ§ª Ejecutando tests unitarios con Vitest..."
          pnpm vitest run --workspace
          echo "âœ… Tests unitarios completados"

  - id: test-e2e-only
    description: >
      Ejecuta solo los tests E2E con Playwright.
    triggers:
      - "run e2e tests"
      - "test e2e"
      - "playwright test"
    steps:
      - name: Run E2E tests
        run: |
          echo "ğŸ­ Ejecutando tests E2E con Playwright..."
          pnpm test:e2e
          echo "âœ… Tests E2E completados"

  - id: build-all-apps
    description: >
      Hace build de todas las aplicaciones del monorepo.
    triggers:
      - "build all apps"
      - "build everything"
      - "make builds"
    steps:
      - name: Build all
        run: |
          echo "ğŸ—ï¸  Building todas las apps..."
          pnpm run build:all
          echo "âœ… Builds completados"

  - id: test-watch
    description: >
      Ejecuta tests unitarios en modo watch para desarrollo.
    triggers:
      - "test watch"
      - "watch tests"
      - "test mode watch"
    steps:
      - name: Run tests in watch mode
        run: |
          echo "ğŸ‘€ Ejecutando tests en modo watch..."
          pnpm vitest --workspace

  - id: test-coverage
    description: >
      Ejecuta tests unitarios y genera reporte de cobertura.
    triggers:
      - "test coverage"
      - "run coverage"
      - "check test coverage"
    steps:
      - name: Run tests with coverage
        run: |
          echo "ğŸ“Š Ejecutando tests con reporte de cobertura..."
          pnpm vitest run --coverage --workspace
          echo "âœ… Reporte de cobertura generado"

  - id: quick-check
    description: >
      VerificaciÃ³n rÃ¡pida: solo tests unitarios y linting (sin build ni E2E).
      Ãštil antes de commits pequeÃ±os.
    triggers:
      - "quick check"
      - "fast test"
      - "pre-commit check"
    steps:
      - name: Quick verification
        run: |
          echo "âš¡ VerificaciÃ³n rÃ¡pida iniciada..."
          echo "ğŸ§ª Tests unitarios..."
          pnpm vitest run || echo "âš ï¸  No hay tests configurados todavÃ­a (normal en fase de setup)"
          echo ""
          echo "âœ… VerificaciÃ³n rÃ¡pida completada"
          echo "ğŸ’¡ Tip: AÃ±ade tests .test.ts o .test.tsx en tus apps"

  - id: ci-pipeline
    description: >
      Simula el pipeline completo de CI: tests + linting + build + E2E.
      Exactamente lo que se ejecutarÃ­a en CI/CD.
    triggers:
      - "run ci pipeline"
      - "simulate ci"
      - "full ci check"
    steps:
      - name: Install dependencies
        run: |
          echo "ğŸ“¦ [CI] Instalando dependencias..."
          pnpm install --frozen-lockfile

      - name: Lint check
        run: |
          echo "ğŸ” [CI] Verificando linting..."
          # AÃ±adir comando de lint cuando estÃ© configurado
          echo "âš ï¸  Lint check pendiente de configurar"

      - name: Unit tests
        run: |
          echo "ğŸ§ª [CI] Tests unitarios..."
          pnpm vitest run --workspace

      - name: Build all
        run: |
          echo "ğŸ—ï¸  [CI] Building apps..."
          pnpm run build:all

      - name: E2E tests
        run: |
          echo "ğŸ­ [CI] Tests E2E..."
          pnpm test:e2e

      - name: CI Summary
        run: |
          echo ""
          echo "âœ… ==============================================="
          echo "âœ… CI PIPELINE COMPLETADO"
          echo "âœ… ==============================================="
          echo ""

